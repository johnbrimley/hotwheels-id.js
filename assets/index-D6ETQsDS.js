(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function st(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ue={exports:{}},Ae;function ct(){return Ae||(Ae=1,(function(o){var r=(function(t){var c=Object.prototype,i=c.hasOwnProperty,s=Object.defineProperty||function(n,e,a){n[e]=a.value},d,m=typeof Symbol=="function"?Symbol:{},k=m.iterator||"@@iterator",T=m.asyncIterator||"@@asyncIterator",j=m.toStringTag||"@@toStringTag";function O(n,e,a){return Object.defineProperty(n,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{O({},"")}catch{O=function(e,a,l){return e[a]=l}}function U(n,e,a,l){var u=e&&e.prototype instanceof w?e:w,p=Object.create(u.prototype),E=new ee(l||[]);return s(p,"_invoke",{value:se(n,a,E)}),p}t.wrap=U;function B(n,e,a){try{return{type:"normal",arg:n.call(e,a)}}catch(l){return{type:"throw",arg:l}}}var x="suspendedStart",v="suspendedYield",y="executing",W="completed",L={};function w(){}function C(){}function A(){}var Y={};O(Y,k,function(){return this});var $=Object.getPrototypeOf,F=$&&$($(te([])));F&&F!==c&&i.call(F,k)&&(Y=F);var M=A.prototype=w.prototype=Object.create(Y);C.prototype=A,s(M,"constructor",{value:A,configurable:!0}),s(A,"constructor",{value:C,configurable:!0}),C.displayName=O(A,j,"GeneratorFunction");function X(n){["next","throw","return"].forEach(function(e){O(n,e,function(a){return this._invoke(e,a)})})}t.isGeneratorFunction=function(n){var e=typeof n=="function"&&n.constructor;return e?e===C||(e.displayName||e.name)==="GeneratorFunction":!1},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,A):(n.__proto__=A,O(n,j,"GeneratorFunction")),n.prototype=Object.create(M),n},t.awrap=function(n){return{__await:n}};function H(n,e){function a(p,E,S,I){var R=B(n[p],n,E);if(R.type==="throw")I(R.arg);else{var f=R.arg,h=f.value;return h&&typeof h=="object"&&i.call(h,"__await")?e.resolve(h.__await).then(function(g){a("next",g,S,I)},function(g){a("throw",g,S,I)}):e.resolve(h).then(function(g){f.value=g,S(f)},function(g){return a("throw",g,S,I)})}}var l;function u(p,E){function S(){return new e(function(I,R){a(p,E,I,R)})}return l=l?l.then(S,S):S()}s(this,"_invoke",{value:u})}X(H.prototype),O(H.prototype,T,function(){return this}),t.AsyncIterator=H,t.async=function(n,e,a,l,u){u===void 0&&(u=Promise);var p=new H(U(n,e,a,l),u);return t.isGeneratorFunction(e)?p:p.next().then(function(E){return E.done?E.value:p.next()})};function se(n,e,a){var l=x;return function(p,E){if(l===y)throw new Error("Generator is already running");if(l===W){if(p==="throw")throw E;return oe()}for(a.method=p,a.arg=E;;){var S=a.delegate;if(S){var I=D(S,a);if(I){if(I===L)continue;return I}}if(a.method==="next")a.sent=a._sent=a.arg;else if(a.method==="throw"){if(l===x)throw l=W,a.arg;a.dispatchException(a.arg)}else a.method==="return"&&a.abrupt("return",a.arg);l=y;var R=B(n,e,a);if(R.type==="normal"){if(l=a.done?W:v,R.arg===L)continue;return{value:R.arg,done:a.done}}else R.type==="throw"&&(l=W,a.method="throw",a.arg=R.arg)}}}function D(n,e){var a=e.method,l=n.iterator[a];if(l===d)return e.delegate=null,a==="throw"&&n.iterator.return&&(e.method="return",e.arg=d,D(n,e),e.method==="throw")||a!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+a+"' method")),L;var u=B(l,n.iterator,e.arg);if(u.type==="throw")return e.method="throw",e.arg=u.arg,e.delegate=null,L;var p=u.arg;if(!p)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,L;if(p.done)e[n.resultName]=p.value,e.next=n.nextLoc,e.method!=="return"&&(e.method="next",e.arg=d);else return p;return e.delegate=null,L}X(M),O(M,j,"Generator"),O(M,k,function(){return this}),O(M,"toString",function(){return"[object Generator]"});function N(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function Q(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function ee(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(N,this),this.reset(!0)}t.keys=function(n){var e=Object(n),a=[];for(var l in e)a.push(l);return a.reverse(),function u(){for(;a.length;){var p=a.pop();if(p in e)return u.value=p,u.done=!1,u}return u.done=!0,u}};function te(n){if(n){var e=n[k];if(e)return e.call(n);if(typeof n.next=="function")return n;if(!isNaN(n.length)){var a=-1,l=function u(){for(;++a<n.length;)if(i.call(n,a))return u.value=n[a],u.done=!1,u;return u.value=d,u.done=!0,u};return l.next=l}}return{next:oe}}t.values=te;function oe(){return{value:d,done:!0}}return ee.prototype={constructor:ee,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(Q),!n)for(var e in this)e.charAt(0)==="t"&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=d)},stop:function(){this.done=!0;var n=this.tryEntries[0],e=n.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function a(I,R){return p.type="throw",p.arg=n,e.next=I,R&&(e.method="next",e.arg=d),!!R}for(var l=this.tryEntries.length-1;l>=0;--l){var u=this.tryEntries[l],p=u.completion;if(u.tryLoc==="root")return a("end");if(u.tryLoc<=this.prev){var E=i.call(u,"catchLoc"),S=i.call(u,"finallyLoc");if(E&&S){if(this.prev<u.catchLoc)return a(u.catchLoc,!0);if(this.prev<u.finallyLoc)return a(u.finallyLoc)}else if(E){if(this.prev<u.catchLoc)return a(u.catchLoc,!0)}else if(S){if(this.prev<u.finallyLoc)return a(u.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(n,e){for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a];if(l.tryLoc<=this.prev&&i.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var u=l;break}}u&&(n==="break"||n==="continue")&&u.tryLoc<=e&&e<=u.finallyLoc&&(u=null);var p=u?u.completion:{};return p.type=n,p.arg=e,u?(this.method="next",this.next=u.finallyLoc,L):this.complete(p)},complete:function(n,e){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&e&&(this.next=e),L},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===n)return this.complete(a.completion,a.afterLoc),Q(a),L}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===n){var l=a.completion;if(l.type==="throw"){var u=l.arg;Q(a)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,a){return this.delegate={iterator:te(n),resultName:e,nextLoc:a},this.method==="next"&&(this.arg=d),L}},t})(o.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})(ue)),ue.exports}var le,Ne;function Ie(){return Ne||(Ne=1,le=(o,r)=>`${o}-${r}-${Math.random().toString(16).slice(3,8)}`),le}var fe,Pe;function et(){if(Pe)return fe;Pe=1;const o=Ie();let r=0;return fe=({id:t,action:c,payload:i={}})=>{let s=t;return typeof s>"u"&&(s=o("Job",r),r+=1),{id:s,action:c,payload:i}},fe}var re={},qe;function _e(){if(qe)return re;qe=1;let o=!1;return re.logging=o,re.setLogging=r=>{o=r},re.log=(...r)=>o?console.log.apply(this,r):null,re}var de,Me;function ut(){if(Me)return de;Me=1;const o=et(),{log:r}=_e(),t=Ie();let c=0;return de=()=>{const i=t("Scheduler",c),s={},d={};let m=[];c+=1;const k=()=>m.length,T=()=>Object.keys(s).length,j=()=>{if(m.length!==0){const v=Object.keys(s);for(let y=0;y<v.length;y+=1)if(typeof d[v[y]]>"u"){m[0](s[v[y]]);break}}},O=(v,y)=>new Promise((W,L)=>{const w=o({action:v,payload:y});m.push(async C=>{m.shift(),d[C.id]=w;try{W(await C[v].apply(this,[...y,w.id]))}catch(A){L(A)}finally{delete d[C.id],j()}}),r(`[${i}]: Add ${w.id} to JobQueue`),r(`[${i}]: JobQueue length=${m.length}`),j()});return{addWorker:v=>(s[v.id]=v,r(`[${i}]: Add ${v.id}`),r(`[${i}]: Number of workers=${T()}`),j(),v.id),addJob:async(v,...y)=>{if(T()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return O(v,y)},terminate:async()=>{Object.keys(s).forEach(async v=>{await s[v].terminate()}),m=[]},getQueueLen:k,getNumWorkers:T}},de}function lt(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var he,De;function ft(){return De||(De=1,he=o=>{const r={};return typeof WorkerGlobalScope<"u"?r.type="webworker":typeof document=="object"?r.type="browser":typeof process=="object"&&typeof lt=="function"&&(r.type="node"),typeof o>"u"?r:r[o]}),he}var pe,Ge;function dt(){if(Ge)return pe;Ge=1;const r=ft()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return pe=t=>{const c={...t};return["corePath","workerPath","langPath"].forEach(i=>{t[i]&&(c[i]=r(c[i]))}),c},pe}var ge,je;function tt(){return je||(je=1,ge={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ge}const ht="7.0.0",pt={version:ht};var ve,Ue;function gt(){return Ue||(Ue=1,ve={workerBlobURL:!0,logger:()=>{}}),ve}var me,Be;function vt(){if(Be)return me;Be=1;const o=pt.version;return me={...gt(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${o}/dist/worker.min.js`},me}var we,We;function mt(){return We||(We=1,we=({workerPath:o,workerBlobURL:r})=>{let t;if(Blob&&URL&&r){const c=new Blob([`importScripts("${o}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(c))}else t=new Worker(o);return t}),we}var ye,Fe;function wt(){return Fe||(Fe=1,ye=o=>{o.terminate()}),ye}var Le,Ye;function yt(){return Ye||(Ye=1,Le=(o,r)=>{o.onmessage=({data:t})=>{r(t)}}),Le}var Ee,$e;function Lt(){return $e||($e=1,Ee=async(o,r)=>{o.postMessage(r)}),Ee}var Se,He;function Et(){if(He)return Se;He=1;const o=t=>new Promise((c,i)=>{const s=new FileReader;s.onload=()=>{c(s.result)},s.onerror=({target:{error:{code:d}}})=>{i(Error(`File could not be read! Code=${d}`))},s.readAsArrayBuffer(t)}),r=async t=>{let c=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?c=atob(t.split(",")[1]).split("").map(i=>i.charCodeAt(0)):c=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(c=await r(t.src)),t.tagName==="VIDEO"&&(c=await r(t.poster)),t.tagName==="CANVAS"&&await new Promise(i=>{t.toBlob(async s=>{c=await o(s),i()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const i=await t.convertToBlob();c=await o(i)}else(t instanceof File||t instanceof Blob)&&(c=await o(t));return new Uint8Array(c)};return Se=r,Se}var Re,ze;function St(){if(ze)return Re;ze=1;const o=vt(),r=mt(),t=wt(),c=yt(),i=Lt(),s=Et();return Re={defaultOptions:o,spawnWorker:r,terminateWorker:t,onMessage:c,send:i,loadImage:s},Re}var Oe,Je;function rt(){if(Je)return Oe;Je=1;const o=dt(),r=et(),{log:t}=_e(),c=Ie(),i=tt(),{defaultOptions:s,spawnWorker:d,terminateWorker:m,onMessage:k,loadImage:T,send:j}=St();let O=0;return Oe=async(U="eng",B=i.LSTM_ONLY,x={},v={})=>{const y=c("Worker",O),{logger:W,errorHandler:L,...w}=o({...s,...x}),C={},A=typeof U=="string"?U.split("+"):U;let Y=B,$=v;const F=[i.DEFAULT,i.LSTM_ONLY].includes(B)&&!w.legacyCore;let M,X;const H=new Promise((f,h)=>{X=f,M=h}),se=f=>{M(f.message)};let D=d(w);D.onerror=se,O+=1;const N=({id:f,action:h,payload:g})=>new Promise((P,q)=>{t(`[${y}]: Start ${f}, action=${h}`);const G=`${h}-${f}`;C[G]={resolve:P,reject:q},j(D,{workerId:y,jobId:f,action:h,payload:g})}),Q=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),ee=f=>N(r({id:f,action:"load",payload:{options:{lstmOnly:F,corePath:w.corePath,logging:w.logging}}})),te=(f,h,g)=>N(r({id:g,action:"FS",payload:{method:"writeFile",args:[f,h]}})),oe=(f,h)=>N(r({id:h,action:"FS",payload:{method:"readFile",args:[f,{encoding:"utf8"}]}})),n=(f,h)=>N(r({id:h,action:"FS",payload:{method:"unlink",args:[f]}})),e=(f,h,g)=>N(r({id:g,action:"FS",payload:{method:f,args:h}})),a=(f,h)=>N(r({id:h,action:"loadLanguage",payload:{langs:f,options:{langPath:w.langPath,dataPath:w.dataPath,cachePath:w.cachePath,cacheMethod:w.cacheMethod,gzip:w.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(Y)&&!w.legacyLang}}})),l=(f,h,g,P)=>N(r({id:P,action:"initialize",payload:{langs:f,oem:h,config:g}})),u=(f="eng",h,g,P)=>{if(F&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(h))throw Error("Legacy model requested but code missing.");const q=h||Y;Y=q;const G=g||$;$=G;const ce=(typeof f=="string"?f.split("+"):f).filter(it=>!A.includes(it));return A.push(...ce),ce.length>0?a(ce,P).then(()=>l(f,q,G,P)):l(f,q,G,P)},p=(f={},h)=>N(r({id:h,action:"setParameters",payload:{params:f}})),E=async(f,h={},g={text:!0},P)=>N(r({id:P,action:"recognize",payload:{image:await T(f),options:h,output:g}})),S=async(f,h)=>{if(F)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return N(r({id:h,action:"detect",payload:{image:await T(f)}}))},I=async()=>(D!==null&&(m(D),D=null),Promise.resolve());k(D,({workerId:f,jobId:h,status:g,action:P,data:q})=>{const G=`${P}-${h}`;if(g==="resolve")t(`[${f}]: Complete ${h}`),C[G].resolve({jobId:h,data:q}),delete C[G];else if(g==="reject")if(C[G].reject(q),delete C[G],P==="load"&&M(q),L)L(q);else throw Error(q);else g==="progress"&&W({...q,userJobId:h})});const R={id:y,worker:D,load:Q,writeText:te,readText:oe,removeFile:n,FS:e,reinitialize:u,setParameters:p,recognize:E,detect:S,terminate:I};return ee().then(()=>a(U)).then(()=>l(U,B,v)).then(()=>X(R)).catch(()=>{}),H},Oe}var be,Ke;function Rt(){if(Ke)return be;Ke=1;const o=rt();return be={recognize:async(c,i,s)=>{const d=await o(i,1,s);return d.recognize(c).finally(async()=>{await d.terminate()})},detect:async(c,i)=>{const s=await o("osd",0,i);return s.detect(c).finally(async()=>{await s.terminate()})}},be}var ke,Ve;function Ot(){return Ve||(Ve=1,ke={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),ke}var Te,Ze;function bt(){return Ze||(Ze=1,Te={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Te}var Ce,xe;function kt(){if(xe)return Ce;xe=1,ct();const o=ut(),r=rt(),t=Rt(),c=Ot(),i=tt(),s=bt(),{setLogging:d}=_e();return Ce={languages:c,OEM:i,PSM:s,createScheduler:o,createWorker:r,setLogging:d,...t},Ce}var Tt=kt();const Xe=st(Tt),ne=document.getElementById("videoSource"),b=document.getElementById("outputCanvas"),K=document.getElementById("tesseractCanvas"),Ct=document.getElementById("toyNumber"),It=document.getElementById("toyName"),_t=document.getElementById("toyColor"),At=document.getElementById("toyYear"),_=b.getContext("2d"),ae=K.getContext("2d"),z=100,J=40,Nt=750,Pt=/^[A-Z0-9]{3,5}-[A-Z0-9]{3,5}$/;let V=null,Z=null,Qe=0,nt=[],ie=null;await Mt();await qt();await Dt();await ot();await Ut();Bt();ne.addEventListener("change",ot);async function qt(){const o=await fetch("/hotwheels.json");if(!o.ok)throw new Error("Failed to load hotwheels.json");nt=await o.json()}async function Mt(){(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(r=>r.stop())}async function Dt(){ne.innerHTML="",(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind==="videoinput").forEach((t,c)=>{const i=document.createElement("option");i.value=t.deviceId,i.text=t.label||`Camera ${c+1}`,ne.appendChild(i)})}async function ot(){jt(),ne.value&&(V=await Gt(ne.value))}async function Gt(o){const r=await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:o}}});return new ImageCapture(r.getVideoTracks()[0])}function jt(){if(!V)return;V.track?.stop(),V=null}async function Ut(){Z=await Xe.createWorker("eng",1,{workerPath:new URL("/hotwheels-id.js/assets/worker.min-32WLk7pY.js",import.meta.url).toString(),corePath:new URL("/hotwheels-id.js/assets/tesseract-core.wasm-DJna89ck.js",import.meta.url).toString(),langPath:"https://tessdata.projectnaptha.com/4.0.0"}),await Z.setParameters({tessedit_pageseg_mode:Xe.PSM.SINGLE_LINE,tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-"})}function Bt(){const o=async()=>{if(V)try{const r=await V.grabFrame();Wt(r),Yt(r)}catch(r){console.error("Frame error:",r)}requestAnimationFrame(o)};o()}function Wt(o){const{sx:r,sy:t,sw:c,sh:i}=at(o.width,o.height,b.width,b.height);_.clearRect(0,0,b.width,b.height),_.drawImage(o,r,t,c,i,0,0,b.width,b.height),Ft()}function Ft(){const o=(b.width-z)/2,r=(b.height-J)/2;_.save(),_.fillStyle=ie?"rgba(0,255,0,0.15)":"rgba(255,255,0,0.1)",_.fillRect(o,r,z,J),_.strokeStyle=ie?"lime":"yellow",_.lineWidth=2,_.strokeRect(o,r,z,J);const t=r+J*.75;_.beginPath(),_.moveTo(o,t),_.lineTo(o+z,t),_.stroke(),_.restore()}async function Yt(o){if(!Z)return;const r=performance.now();if(r-Qe<Nt)return;Qe=r;const t=zt(o);K.width=t.sw,K.height=t.sh,ae.clearRect(0,0,t.sw,t.sh),ae.drawImage(o,t.sx,t.sy,t.sw,t.sh,0,0,t.sw,t.sh),$t();try{const{data:c}=await Z.recognize(K),i=c.text.trim();if(console.log("OCR Result:",JSON.stringify(i)),!Pt.test(i))return;const s=i.split("-")[0],d=nt.find(m=>s.startsWith(m.Number));d&&d.Number!==ie?.Number&&(ie=d,Ht(d),console.log("ðŸ“Œ UPDATED:",d.Number,d.Name))}catch(c){console.error("OCR failed:",c)}}function $t(){const o=ae.getImageData(0,0,K.width,K.height),r=o.data;for(let t=0;t<r.length;t+=4){const c=r[t]*.299+r[t+1]*.587+r[t+2]*.114;r[t]=r[t+1]=r[t+2]=c}ae.putImageData(o,0,0)}function Ht(o){Ct.textContent=o.Number,It.textContent=o.Name,_t.textContent=o.Color,At.textContent=o.Year}function at(o,r,t,c){const i=o/r,s=t/c;let d,m,k,T;return i>s?(T=r,k=T*s,d=(o-k)/2,m=0):(k=o,T=k/s,d=0,m=(r-T)/2),{sx:d,sy:m,sw:k,sh:T}}function zt(o){const r=at(o.width,o.height,b.width,b.height),t=r.sw/b.width,c=r.sh/b.height,i=(b.width-z)/2,s=(b.height-J)/2;return{sx:r.sx+i*t,sy:r.sy+s*c,sw:z*t,sh:J*c}}window.addEventListener("beforeunload",async()=>{Z&&await Z.terminate()});
